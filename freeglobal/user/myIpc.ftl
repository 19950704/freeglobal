
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--<title>量波</title>-->
    <title></title>
    
	<link href="https://xtglobal.oss-cn-shenzhen.aliyuncs.com/css/global/reset.css" rel="stylesheet">	
    <link href="https://xtglobal.oss-cn-shenzhen.aliyuncs.com/css/global/style.css" rel="stylesheet">
    <script src="https://free-plan.oss-cn-shenzhen.aliyuncs.com/js/new_file.js" type="text/javascript" charset="utf-8"></script>	
    
</head>
<body>
<!--页面-top-->
<div class="wdzc-top" style="height: 232px;">
	<div class="box-top">
    	<div class="fh"><a href="javascript:history.back(-1);" title="返回"></a></div>
    	<div class="top-title">量波</div>
    </div>
    <div class="wd-top-down pa-lr30">
    	<a href="#" class="fix" style="background: unset;margin-top: 2px;height: 130px;">
            <div class="txt-box" style="width:100%">
            	<h2><i id="fuzhiShareUrl"><img src="https://free-plan.oss-cn-shenzhen.aliyuncs.com/images/erweima.png"></i><i style="font-style:unset;margin-left: 10px;"></i><i style="margin-left:76%;" onclick="javascript:window.location.href=&#39;/index/businessCollege.do&#39;">...</i></h2>
	                <span style="background: unset;border: unset;padding: 0px;"><i id="fuzhieth"> <img src="https://free-plan.oss-cn-shenzhen.aliyuncs.com/images/copy2.png"> </i>0x7451d353...5e5cac1187</span>
            </div>            
    	</a>
    </div>
</div>

<div class="wrap" style="margin-bottom: 90px;">
	<div class="ipc-list">
		        <div class="item bor-top20">
		        	<div class="jackpot fix">
		            	<div class="vip"><img src="https://free-plan.oss-cn-shenzhen.aliyuncs.com/images/60.png" /></div>
		                <div class="txt-box">
		                	<h3>量波池 </h3>
		                    <p>本期总额：5000000</p>
		                    <p>已达数额：2602815</p>
		                </div>
		                	<span class="chi-xu">持续中</span>
		            </div>
		            <div class="ratio fix">
		            	<div class="bl">
		                	<h4 style="font-weight: 600;color: #56b4f8;font-size: 30px;">第一期</h4>
		                    <span></span>
		                </div>
		                <div class="zg">
		                	<h4>当前比例：</h4>
		                    <span>1ETH=2000FREE</span>                
		                </div>
		                <a href="#" class="goumai" onclick="crowdfunding()" style="background: #56b4f8;">立即认购</a>
		            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">1.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:100%"></span></div>
				                <div class="bfb" style="float:left">100%</div>
				                <div class="bfb" style="float:right">12000</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">2.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:100%"></span></div>
				                <div class="bfb" style="float:left">100%</div>
				                <div class="bfb" style="float:right">6000</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">3.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:100%"></span></div>
				                <div class="bfb" style="float:left">100%</div>
				                <div class="bfb" style="float:right">4000</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">4.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:100%"></span></div>
				                <div class="bfb" style="float:left">100%</div>
				                <div class="bfb" style="float:right">3000</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">5.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:100%"></span></div>
				                <div class="bfb" style="float:left">100%</div>
				                <div class="bfb" style="float:right">2400</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">6.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:20.6%"></span></div>
				                <div class="bfb" style="float:left">20.6%</div>
				                <div class="bfb" style="float:right">2000</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">7.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:0%"></span></div>
				                <div class="bfb" style="float:left">0%</div>
				                <div class="bfb" style="float:right">1700</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">8.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:0%"></span></div>
				                <div class="bfb" style="float:left">0%</div>
				                <div class="bfb" style="float:right">1500</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">9.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:0%"></span></div>
				                <div class="bfb" style="float:left">0%</div>
				                <div class="bfb" style="float:right">1300</div>
				            </div>
				            <div class="progress fix">
				            	<div class="bfb" style="float:left; width: 8%;">10.</div>
				            	<div class="jd-tiao" style="width:60%;"><span style="background: #56b4f8;width:0%"></span></div>
				                <div class="bfb" style="float:left">0%</div>
				                <div class="bfb" style="float:right">1200</div>
				            </div>
		        </div>

    <div class="footer">
        <ul class="footer-ul fix">
            <li>
                <a href="/index/global.do">
                    <i class="foot-icon foot-icon-sy"></i>
                    <p>首页</p>
                </a>
            </li>
            <li>
	        	<a href="/user/myProperty.do">
	            	<i class="foot-icon foot-icon-sc"></i>
	                <p>资产</p>
	            </a>
	        </li>
          
	        <li>
	            <a href="/index/global.do">
	                <i class="ind-icon ind-icon-pp" style="background: url(https://free-plan.oss-cn-shenzhen.aliyuncs.com/images/60.png) no-repeat center; margin-top:20px"></i>
	            </a>
	        </li>
	        
	        <li>
	            <a href="/user/find.do">
	            	<i class="foot-icon foot-icon-jy"></i>
	                <p>发现</p>
	            </a>
	        </li>
	        
            <li>
                <a href="/user/personCenter.do">
                    <i class="foot-icon foot-icon-wd"></i>
                    <p>我的</p>
                </a>
            </li>
        </ul>
    </div>
    
    <div id="light" class="grtx-tan" style="top: 15%;">
    <div class="zhang-box pa-lr30">
    	<form> 
            <div class="shu-ru fix">
                <span class="txt">购买数量:</span>
                <input id="accountNumCeo" name="accountNumCeo" type="text" class="text" placeholder="输入量波数量" />        
            </div>
        </form>
    </div>
    <div class="fix">
    	<div class="xz-xiangji">
        	<a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">取消</a>
        </div>
        <div class="xz-xiangji">
        	<input type="button" id="transfer" value="确定" style="color: rgba(32,147,231,1);font-size: 100%;background-color: white;margin-top: 6%;border: 1px #ffffff solid;"/>
        </div>
    </div>
</div>

<div id="fade" class="sz-black"></div>
    
</div>
<input type="hidden" id="orderType" value="" />
<input type="hidden" id="shareUrl" value="https://www.freeglobal.vip//index/global.do?userParentCenterCode=null" />
<input type="hidden" id="ethAccount" value="0x7451d353867655ce1a5601b0acecdf5e5cac1187" /> 
<input type="hidden" id="ethAddress" value="0xc5c3c11c8302c8d9c1f13cd2b0b8f2cd510bed52" /> 
<!--js-基本.js-->
<script src="https://xtglobal.oss-cn-shenzhen.aliyuncs.com/js/global/jquery-1.8.3.min.js"></script>
<script src="https://xtglobal.oss-cn-shenzhen.aliyuncs.com/js/global/clipboard.min.js" type="text/javascript"></script>

<script type="text/javascript">
	$("#fuzhieth").click(function() {
    	var ethAccount = $("#ethAccount").val();
	    var clipboard = new ClipboardJS('#fuzhieth', {
	        text: function() {
	            return ethAccount;
	        }
	    });
	
	    clipboard.on('success', function(e) {
	        alert("复制成功");
	    });
	
	    clipboard.on('error', function(e) {
	        alert("复制失败");
	    });
    
    })
    
    $("#fuzhiShareUrl").click(function() {
		var shareUrl = $("#shareUrl").val();
		var clipboard = new ClipboardJS('#fuzhiShareUrl', {
	        text: function() {
	            return shareUrl;
	        }
	    });
	
	    clipboard.on('success', function(e) {
	        alert("复制成功");
	    });
	
	    clipboard.on('error', function(e) {
	        alert("复制失败");
	    });
	})

	function crowdfunding () {
		document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block';
  	}
  	
  	$("#transfer").click(function() {
  		var accountNum = $("#accountNumCeo").val();
	  		
	  	if (accountNum == null || accountNum == '' || accountNum == undefined) {
	  		alert('量波数量为空');
			return false;
	  	}		
	  		
  		if(!/^\d+$/.test(accountNum) || parseInt(accountNum) <1 || accountNum % 1 != 0) {
			alert('量波数量只能是50的倍数');
			return false;
		}
		
		jQuery.ajax({
	  		data : {
	  			'coinAccountAmount' : accountNum
	  		},
	        async : false,
	        type : "POST",
	        timeout: 60000,
	        url : "/deal/queryCrowdInfo.do",
	        dataType  :"json",
	        success: function(data) {
	        	if(data.status){
	        		var toAddress = data.crowdAddress;
	        		var amount = data.ethAmount;
	        		var coinPencent = data.coinPencent;
	        		
	        		var oneCoinAmount = data.oneCoinAmount;
	        		var oneEthPrice = data.oneEthPrice;
	        		var twoCoinAmount = data.twoCoinAmount;
	        		var nextCoinPencent = data.nextCoinPencent;
	        		var twoEthPrice = data.twoEthPrice;
			  		var params = {
					  to: toAddress,
					  from: web3.eth.accounts[0],
					  value: web3.toWei(amount, 'ether'),
					}
					
					web3.eth.sendTransaction(params, function (err, signature) {
					  if (err) {
					    return false;
					  } else {
					    document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none';
						
				  		jQuery.ajax({
					  		data : {
					  			'coinAccountAmount' : accountNum,
					  			'ethAmount' : amount,
					  			'coinPencent' : coinPencent,
					  			'oneCoinAmount': oneCoinAmount,
					  			'oneEthPrice': oneEthPrice,
					  			'twoCoinAmount': twoCoinAmount,
					  			'nextCoinPencent': nextCoinPencent,
					  			'twoEthPrice': twoEthPrice
					  		},
					        async : false,
					        type : "POST",
					        timeout: 60000,
					        url : "/deal/crowdfunding.do",
					        dataType  :"json",
					        success: function(data) {
					        	if(data.status){
					        		alert(data.message);
					        		location.reload();
					        	}else{
					        		alert(data.message); 
					        		return false;
					        	}
					        }
						});   
					  }
					})
	        	}else{
	        		alert(data.message); 
	        		return false;
	        	}
	        }
		});
  	
  		
  	})
</script>   	
</body>
</html>
